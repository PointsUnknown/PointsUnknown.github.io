<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>New York City's Deliversitas</title>
    <link rel="shortcut icon" href="favicon.ico?" type="image/x-icon">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css' rel='stylesheet' />
    <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
    <script src="https://unpkg.com/scrollama"></script>
    <link href='styles.css' rel='stylesheet'/>

</head>
<body>

<img src="https://raw.githubusercontent.com/ilenapeng/nyc-delivery-cyclists/main/images/_MG_3340.jpg" style="max-width: 100%">

<div id="img-header">
    <h1>The Deliveristas: Food Delivery Workers on Ground Zero</h1>

    <em>
        <p>
            By Patricia Martínez Sastre, Ilena Peng, Luiz Fernando Toledo and Joel Konopo
        </p>

        <p style="font-size: 0.8em;">
            Photos by Patricia Martínez Sastre | Charts by Ilena Peng
        </p>
    </em>

        <p>
            They know that to make money, they need to work fast     
        </p>
    
        <p>
            They know that at any moment, their bikes may be stolen  
        </p>
    
        <p>
            They know that each day, they are risking their lives
        </p>
    
        <p>
            So, tell us, how much do you know about the people who bring warm food to your doorstep whenever you are hungover, feeling sick or just dead tired? Honestly, tell us. How much do you know about the challenges they face? And more importantly, how do you treat them?
        </p>
</div>

<div id="text-container">

    <!-- (there is an out-of-focus photo 
that could work for the title) TK TITLE -->

<!-- Intro -->

    <p>
        Since the start of the pandemic, usage of on-demand delivery apps has proliferated mainly thanks to a growing immigrant workforce. Young men from Central America, South Asia, and West Africa make up the vast majority of these laborers, who the apps classify as independent contractors.
    </p>

    <p>
         New York City's 80,000 food delivery drivers, who were considered essential workers during the pandemic, now feel little or nothing has changed since the eruption of Covid-19. They say they have returned to being invisible in a bustling city where they regularly face dangers on the road, as well as from anonymous burglars and disrespectful customers.
    </p>

<b>
    <p>
        This is <em>their</em> story. Follow <em>them</em>.
    </p>
</b>

    <img id="chart" src="charts/images/order-source.png">

<!-- the route -->
    <h2>1. The Route</h2>

    <p>
        Every day, thousands of food couriers gallop the streets of New York City in order to satisfy the food cravings of eager customers. Often, they work for more than six hours a day, more than six days a week. Whether they are offering their services to apps like UberEats, Caviar, Grubhub or DoorDash, they are considered independent workers with no health insurance, workers’ compensation or paid leave, and a salary that varies depending on the number of deliveries they are able to fulfill.
    </p>

    <img id="chart" src="charts/images/order-wait.png">

    <p>
        On average, the workers make up to $2,345 per month, a recent <a href="https://img1.wsimg.com/blobby/go/6c0bc951-f473-4720-be3e-797bd8c26b8e/09142021CHARTSLos%20Deliveristas%20Unidos-v02.pdf">study</a> by the Workers’ Justice Project and The Worker Institute of Cornell University found, which means an hourly net pay of about $12.21, including tips. Leaving tips aside, their average net pay drops to $7.87, the same study said, well below the minimum wage. 
    </p>

<!-- Sergio's commute -->

    <p>37-year-old Sergio Solano, originally from Mexico, treks from the Bronx to Midtown at least five days a week to work as an app-based delivery worker. He has done this job for more than 15 years, first catering for buffets and parties, and more recently for delivery apps. He doesn't have a personified boss, but said the pressure to respond to an algorithm can be even higher.</p>

    <p>Solano said these apps allow workers to make a living and provide for their families, but also added that there are many safety issues ordinary people aren't aware of when they order a delivery. There are also start-up and logistical costs, like purchasing tires, extra batteries and portable phone chargers.
    </p>

<!-- table -->
<div id="table" style="display: block; margin: 0 auto;">
    <h3 style="text-align: center;">Costs for delivery workers</h3>
    <table style="margin: 0 auto; max-width: 70%;">
        <tr>
          <th>Expenses</th>
          <th>Amount</th>
        </tr>
        <tr>
            <td>Bike</td>
            <td>$1800</td>
        </tr>
        <tr>
            <td>Extra bike battery</td>
            <td>$600</td>
        </tr>
        <tr>
          <td>Repairing flat tires</td>
          <td>$20-25</td>
        </tr>
        <tr>
            <td>Changing a pair of flat tires</td>
            <td>$80</td>
        </tr>
        <tr>
            <td>Changing brakes and oil each month</td>
            <td>$15</td>
        </tr>
        <tr>
            <td>Food (Snack, lunch, water and juice)</td>
            <td>$30-35 per day</td>
          </tr>

      </table>
    <p style="text-align: center;"><em>Based on Sergio Solano's estimates of his costs</em></p>
</div>

    <p>On Thursday, July 20, 2022, Solano biked 31.3 miles over the course of 4.5 hours. This is where he went and what he earned.</p>

</div>

<!-- MAP HERE -->
<div id="map"></div>

<!-- this is where elements are appended. DON'T DELETE -->
<div id="story">
</div>

<!-- text CONTINUED -->
<div id="text-container">
    <p>Food couriers are classified according to the percentage of orders they accept, whether those orders are delivered on time and how customers rate them, Solano said. Workers who do better tend to get more and higher paid orders. Those who perform "poorly" in the eyes of a platform can even be banned from using specific apps. In prioritizing speed over almost anything else, this situation can push deliveristas into extremely dangerous situations on two wheels, according to cycling safety advocates like Kevin Daloia.</p>

    <p>"It is simple. To break down the time barrier means they will make more money," Daloia said. "But it is a physical job, so when they finish their 8 to 10 hour shifts, they are tired when they come home and unfortunately, that tends to be the time [when] lots of them are hit and getting into crashes."
    </p>

    <img id="photo" src="https://raw.githubusercontent.com/ilenapeng/nyc-delivery-cyclists/main/images/_MG_3466.jpg">

    <p>Roughly half of deliveristas have been involved in an accident or crash while doing a delivery, according to the WJP-Cornell study in which 500 food couriers were surveyed. At least twelve workers have been killed on their bikes so far this year, according to an unofficial count Solano shared, compared to nine last year and seven in 2020.
    </p>

    <p>"During rush hours, it is dangerous and it can be disastrous to drive on the street," Solano said. "In the bicycle lane, there are people with scooters, motorcycles, people crossing, etc. and there are more accidents."
    </p>
    
    <p>"The fault [when a crash happens] can also be ours," he added. "The car wants to pass and so do you - and it hits you. Road stress affects both parties, both the delivery person and the driver."
    </p>

    <p>Solano added that medical expenses come from the workers' own pockets.</p>

    <img id="photo" src="https://raw.githubusercontent.com/ilenapeng/nyc-delivery-cyclists/main/images/_MG_3470.jpg">

    <p>In order to create awareness of the risks and to help injured deliveristas who need to rush to the hospital leaving their bikes behind, Solano and other co-workers created in the end of 2020 a Facebook page for food couriers to post announcements about numerous bike thefts, accidents, campaigns for free helmets and funerals. A total of 60 traffic accidents were also reported in the Facebook group.
    </p>

    <p>In roughly a year and a half, 330 thefts have been reported on their page, "El Diario de los Deliveryboys en la Gran Manzana" — which translates to "The Diary of the Deliveryboys in the Big Apple" in English — with a significant increase over the last months. 
    </p>

    <p>54% of the respondents to the WJP-Cornell survey reported having experienced bike theft. About 30% of them said to have also been physically assaulted during the robbery.
    </p>

<!-- the tool section -->
    <h2>2. The Tool</h2>

    <p>Ana Flores, whose real name has been changed to preserve her identity, moved from Mexico to the USA in 2019 as an asylum seeker. On July 21, she was buying bread and butter in Queens after a full day delivering food when her scooter was stolen. Flores said it took her about 7 minutes to pay at Target and get out again to the street. Her motorcycle was already gone. 
    </p>

    <p>Flores, who typically works for UberEats, doesn't know when she will be able to get back to work. She doesn't have a lot of hope that the NYPD will be able to recover the scooter she is still paying for in installments. "This happens daily, it is not an isolated case," she said. "The robbery has become so widespread, there is no control."
    </p>

    <img id="chart" src="charts/images/bike-stolen.png">

    <p>Usually late at night, some food delivery workers are ambushed by robbers with knives or guns, or brutally beaten up while their $2,000 electric bikes get stolen, as <a href="https://www.theverge.com/22667600/delivery-workers-seamless-uber-relay-new-york-electric-bikes-apps">The Verge</a> has reported. Because of this danger, some bikers have been patrolling Willis Avenue Bridge, which connects Manhattan and the Bronx, for months in order to help other workers cross the bridge safely.
    </p>

    <p>Even when deliveries are completed safely, it is common for workers to face threatening, discriminatory and even violent treatment from customers, who also have the ability to affect their earnings by tipping less, giving them low ratings or filing a report to delivery companies if they are dissatisfied with the delivery. Reports like these could result in the delivery worker being immediately terminated with the apps they work for.
    </p>

    <p>"In most cases, they are forced to accept the harassment because they do not want the restaurant or customers filing a complaint against them," explained Andrew Wolf, a professor of sociology at the City University of New York who has studied the app-based food delivery industry.
    </p>

    <img id="photo" src="https://raw.githubusercontent.com/ilenapeng/nyc-delivery-cyclists/main/images/_MG_3432.jpg">

    <p>Flores said that she has encountered naked customers at least twice while working for UberEats. She said she complained, only to get reported and have her account temporarily deactivated. "I won't let a client disrespect me just to have a good score," she said.
    </p>

    <p>Sergio has also encountered clients high on drugs. He also said some customers are aggressive if the delivery worker arrives late, even if the reason for their delay was related to the restaurants' capacity to dispatch all their orders on time.
    </p>

    <img id="chart" src="charts/images/delivery-time.png">

<!-- section 3 -->
    <h2>3. The Future</h2>

    <p>Food couriers have also been advocating for more protections, both in terms of basic working rights and infrastructure changes, like better access to protected lanes that could help save their lives. 
    </p>

    <p>Last year, NYC approved a legislation package that would allow food delivery workers to have restroom access at partnering restaurants starting in 2023, something many of them say is still not happening now. The new legislation would also establish a minimum payment per trip and make apps disclose their tipping policies.
    </p>

    <p>Flores said having access to a restroom is doubly crucial for women, especially when they are on duty and have their monthly period - an extra challenge in a predominantly male profession, where only 4% of women working as delivery workers, according to the WJP-Cornell study. Just the other day, Flores said, a Pizza Hut didn't allow her to use their bathroom.
    </p>

    <p>"You are away from home, you drink water and sometimes you just need to go somewhere and wash your face and freshen up," she said. "There comes a time when you get dizzy from going up, down stairs, taking off and putting on your helmet, etc."
    </p>

    <p>Former mayor Bill de Blasio has promised to install 30 miles of protected bike lanes each year as part of Vision Zero, a citywide initiative to eliminate death and serious injuries from traffic incidents. 
    </p>

    <p>This measure could be critical, given that between 2014 and 2019, 90% of fatalities on bikes happened on streets without bike lanes, according to the <a href="https://www1.nyc.gov/html/dot/downloads/pdf/bike-safety-plan.pdf">NYC Department of Transportation</a>.
    </p>

    <p>"Bicycle lanes create better conditions for drivers, bicyclists and pedestrians", said Shawn Garcia, the Bronx and Uptown organizer for the non-profit Transportation Alternatives. "And for delivery workers is a different conversation because we are not just talking about recreational use but about something tied to someone's livelihood."
    </p>

    <p>The city has been slow to implement this solution, and advocates and scholars report that while protected lanes have grown in the last years in specific areas in Manhattan and Queens, boroughs like the Bronx — where a significant number of food delivery drivers live— continue to be neglected.
    </p>

    <p>Only 6% of New York City’s on-street protected bike lanes are in the Bronx, compared to 75% in Manhattan and Queens, according to DOT data, even though roughly an equal percentage of residents in every borough ride bikes. Central Harlem is also the area with the least amount of bike infrastructure of all Manhattan. 
    </p>

    <!-- altair graph with lanes -->

    <!-- <p>"There are safe roads in lower Manhattan, but it has been implemented at a very slow pace. There are certain points, near the City Hall, that have a barrier, and some more in Queens and Brooklyn", Solano said.
    </p> -->

    <p>"We want to see more because if we don't have a bike lane, we would get into the bus lane even though we know it's not allowed," Solano said. He added that being in the bus lane both raises the risk of being hit by a car and of receiving a ticket. 
    </p>

    <p>Delivery has become a part of the American lifestyle, even for items that are small or trivial. But those who bring these items often do so with few protections and low pay in a physically demanding job.</p>

    <p>"Not only do we bring food to those who need it, complete a route, invest in energy, gasoline, a telephone, etc. but we are also risking our lives," Flores said.
    "And all that for two or three dollars... Of course, there are some six and seven-dollar races, but the system overall is very unfair."
    </p>

</div>

<div id="footer">
    <p>Created for the Columbia Journalism School's Point Unknown mapping class.</p> 
    <p>All code and data is available on <a href='https://github.com/ilenapeng/nyc-delivery-cyclists'>GitHub.</a></p>
</div>

<script src="./config.js"></script>
<script src="./js/drive.js"></script>
<script>

var layerTypes = {
    'fill': ['fill-opacity'],
    'line': ['line-opacity'],
    'circle': ['circle-opacity', 'circle-stroke-opacity'],
    'symbol': ['icon-opacity', 'text-opacity'],
    'raster': ['raster-opacity'],
    'fill-extrusion': ['fill-extrusion-opacity']
}

var alignments = {
    'left': 'lefty',
    'center': 'centered',
    'right': 'righty'
}

function getLayerPaintType(layer) {
    var layerType = map.getLayer(layer).type;
    return layerTypes[layerType];
}

function setLayerOpacity(layer) {
    var paintProps = getLayerPaintType(layer.layer);
    paintProps.forEach(function(prop) {
        map.setPaintProperty(layer.layer, prop, layer.opacity);
    });
}

var story = document.getElementById('story');
var features = document.createElement('div');
features.classList.add(alignments[config.alignment]);
features.setAttribute('id', 'features');

var header = document.createElement('div');

if (config.title) {
    var titleText = document.createElement('h1');
    titleText.innerText = config.title;
    header.appendChild(titleText);
}

if (config.subtitle) {
    var subtitleText = document.createElement('h2');
    subtitleText.innerText = config.subtitle;
    header.appendChild(subtitleText);
}

if (config.byline) {
    var bylineText = document.createElement('p');
    bylineText.innerText = config.byline;
    header.appendChild(bylineText);
}

if (config.description) {
  var descriptionText = document.createElement("div");
  descriptionText.innerHTML = config.description;
  header.appendChild(descriptionText);
}

if (header.innerText.length > 0) {
    header.classList.add(config.theme);
    header.setAttribute('id', 'header');
    story.appendChild(header);
}

config.chapters.forEach((record, idx) => {
    var container = document.createElement('div');
    var chapter = document.createElement('div');
    
    if (record.title) {
        var title = document.createElement('h3');
        title.innerText = record.title;
        chapter.appendChild(title);
    }
    
    if (record.image) {
        var image = new Image();  
        image.src = record.image;  
        chapter.appendChild(image);
    }
    
    if (record.description) {
        var story = document.createElement('p');
        story.innerHTML = record.description;
        chapter.appendChild(story);
    }

    container.setAttribute('id', record.id);
    container.classList.add('step');
    if (idx === 0) {
        container.classList.add('active');
    }

    chapter.classList.add(config.theme);
    container.appendChild(chapter);
    features.appendChild(container);
});

story.appendChild(features);

// commented this out and added in footer in just HTML because otherwise the second text-container appears below the footer
// var footer = document.createElement('div');

// if (config.footer) {
//     var footerText = document.createElement('p');
//     footerText.innerHTML = config.footer;
//     footer.appendChild(footerText);
// }

// if (footer.innerText.length > 0) {
//     footer.classList.add(config.theme);
//     footer.setAttribute('id', 'footer');
//     story.appendChild(footer);
// }

mapboxgl.accessToken = config.accessToken;

const transformRequest = (url) => {
    const hasQuery = url.indexOf("?") !== -1;
    const suffix = hasQuery ? "&pluginName=scrollytellingV2" : "?pluginName=scrollytellingV2";

    return {
      url: url + suffix
    }
}

var map = new mapboxgl.Map({
    container: 'map',
    style: config.style,
    zoom: 6.5,
    maxZoom: 12,
    minZoom: 6.5,
    center: [-73.949, 40.752],
    // center: config.chapters[0].location.center,
    // zoom: config.chapters[0].location.zoom,
    // bearing: config.chapters[0].location.bearing,
    // pitch: config.chapters[0].location.pitch,
    scrollZoom: false,
    transformRequest: transformRequest
});

var marker = new mapboxgl.Marker();
if (config.showMarkers) {
    marker.setLngLat(config.chapters[0].location.center).addTo(map);
}

// instantiate the scrollama
var scroller = scrollama();

function handleStepProgress(response) {
    let stepProgress;

    if (response.element.id.slice(0,5) === 'drive') {
        let driveSlideNum = parseInt(response.element.id.slice(-2));
        if (driveSlideNum === 0) {
            map.setLayoutProperty('animatedLine', 'visibility', 'visible');
            stepProgress = Math.round(response.progress*driveSmoothness);
        } else {
            stepProgress = Math.round(response.progress*driveSmoothness+driveSmoothness*driveSlideNum);
        }
        changeCenter(stepProgress);
    }
}

map.on("load", function() {

    let w = window.innerWidth;
    let initBounds = routeData.features[0].geometry.coordinates;

    if (followPoint === false) {
        var bounds = initBounds.reduce(function(bounds, coord) {
            return bounds.extend(coord);
        }, new mapboxgl.LngLatBounds(initBounds[0], initBounds[0]));
         
        if (w >= 500) {
            map.fitBounds(bounds, {
                padding: {top: 150, bottom: 150, right: -100, left: 200},
                duration: 0
            });
        } else {
            map.fitBounds(bounds, {
                padding: 20,
                duration: 0
            });
        }
    } else {
        map.setZoom(followZoomLevel);
        map.setBearing(followBearing);
        map.setPitch(followPitch);
    }

    map.addSource('lineSource', {
        "type": "geojson",
        // turn off lineMetrics if not doing gradient colors
        lineMetrics: true,
        "data": geojsonPoint
    });

    map.addSource('pointSource', {
        "type": "geojson",
        "data": geojsonPoint
    });

    map.addLayer({
      "id": "animatedLine",
      "type": "line",
      "source": "lineSource",
      'paint': {
        // for static color
            // 'line-color': 'red',
            'line-opacity': 1,
            'line-width': 3.5,
            'line-gradient': [
            'interpolate',
            ['linear'],
            ['line-progress'],
            0,
            // '#A9E856',
            '#D37D1B',
            // 0.5,
            // '#58A4B0',
            1,
            // '#373F51'
            '#152B5F',
            // '#205962'
            ]

       },
       'layout': {
        //    'visibility': 'none'
       }
    });

    map.addLayer({
      "id": "animatedPoint",
      "type": "circle",
      "source": "pointSource",
      'paint': {
            'circle-radius': 5,
            'circle-opacity': 1,
            'circle-color': '#152B5F'
      },
      'layout': {
           // 'visibility': 'none'
       }
    });

    // setup the instance, pass callback functions
    scroller
    .setup({
        step: '.step',
        offset: 0.5,
        progress: true
    })
    .onStepEnter(response => {
        var chapter = config.chapters.find(chap => chap.id === response.element.id);
        response.element.classList.add('active');
        // map.flyTo(chapter.location);
        if (config.showMarkers) {
            marker.setLngLat(chapter.location.center);
        }
        if (chapter.onChapterEnter.length > 0) {
            chapter.onChapterEnter.forEach(setLayerOpacity);
        }
    })
    .onStepExit(response => {
        var chapter = config.chapters.find(chap => chap.id === response.element.id);
        response.element.classList.remove('active');
        if (chapter.onChapterExit.length > 0) {
            chapter.onChapterExit.forEach(setLayerOpacity);
        }
    })
    .onStepProgress(handleStepProgress);

    createLine();
});

// setup resize event
window.addEventListener('resize', scroller.resize);

$(document).ready(function (){
    $.ajax({
      // url:"./data/highwaydrive.geojson",
      url:"./data/path.geojson",
      dataType: "json",
      success: function (data) {
        console.log('data', data.features[0]);
        routeData = data;
      },
      error: function () {
        console.log('error loading data');
      }
    });
});

</script>

</body>
</html>
